<link href="
https://cdn.jsdelivr.net/npm/fontsource-cairo@4.0.0/index.min.css
" rel="stylesheet">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-acol-xs-12 col-lg-6 col-xl-3  wesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />



<div class="container-fluid">
  <mat-drawer-container >
    <mat-drawer mode="side" opened style="position: fixed;">
      <app-aside></app-aside>
    </mat-drawer>
    <mat-drawer-content>
      <app-header></app-header>
      <div class="container pt-5">
        <h1 style="font-weight: 900; font-size:30px">{{projectName}}</h1>
        <h1 style="font-weight: 400;margin-bottom:40px; font-size:17px; color:#9BABC6">{{projectDescription}}...</h1>
        <div class="buttons mt-2 pt-2">
          <button (click)="newTaskDialog()" style="background-color:#cacfd2; color:rgb(159, 156, 196)"
            class="btn me-2 twoButtons rounded-pill"><i class="fa-solid fa-circle-plus"></i>New Task</button>
          <button style="background-color:#314150; color:white" class="btn me-2 twoButtons rounded-pill"><i
              class="fa fa-envelope me-2"></i>Messages</button>
          <button style="background-color:#314150; color:white" class="btn rounded-pill twoButtons">Online
            users</button>
        </div>
        <div class="row">
          <div class=" col-xs-12 col-lg-6 col-xl-3  ">
            <div class=" d-flex  justify-content-center align-items-center" >
              <div class="example-container">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <div class="d-flex justify-content-start align-items-center">
                    <i class="fa-solid fa-circle" style="color:#1a01ba"></i>
                    <h2>To do </h2>
                    <div class="circle-number d-flex justify-content-center align-items-center bg-light text-dark" style="border-radius:50%; width:20px; height:20px;">{{ todo.length }}</div>
                  </div>
                  <div class="d-flex justify-content-center align-items-center" style="border-radius:50%; width:20px; height:20px;background-color: #FFFFFF; cursor:pointer">
                    <i class="fa fa-plus text-primary" style="margin-top:2px"></i>
                  </div>
                </div>
                <div style="background-color: #1A01BA;height:4px; width:100%"></div>
                <div
                  cdkDropList
                  #todoList="cdkDropList"
                  [cdkDropListData]="todo"
                  [cdkDropListConnectedTo]="[inProgressList, inReviewList, doneList]"
                  class="example-list"
                  (cdkDropListDropped)="drop($event)">
                  @for (item of todo; track item) {
                    <div class="example-box" cdkDrag>
                      <div class="d-flex justify-content-between align-items-center">
                        <div class="priority-box" [style.background-color]="getPriorityColor(item.priority)"><span [style.color]="getPriorityTextColor(item.priority)">{{item.priority}}</span></div>
                        <i class="fa fa-ellipsis"></i>
                      </div>
                      <div class="priority-circle" ></div>
                      <p class="text-task" style="font-weight:700; font-size:16px;margin:0; margin-top:8px">{{item.title}}</p>
                      <p class="text-description" style="margin:0px; color:#9BABC6; font-weight:400; font-size:smaller">{{item.description}}</p>
                      <div class="d-flex justify-content-start align-items-center flex-wrap">
                        <p style="margin:0; margin-bottom:4px; margin-top:4px; font-weight:500">Assigned to: </p>
                        <div class="d-flex flex-wrap justify-content-start align-items-center">
                          <div class="participant" *ngFor="let participant of item.participants">{{participant}}</div>
                        </div>
                      </div>
                      <div>
                        <p style="color:#9BABC6"><span style="color:#7637F5">Due date:</span> 12 Jan 2024</p>
                      </div>
                      <div class="progress" role="progressbar" aria-label="Animated striped example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: 75%">7 Days left</div>
                      </div>
                      <div class="comments mt-3 text-end">
                        <i style="color:#9BABC6; text-decoration: none; font-size:12px" class="me-1 fa-regular fa-comment-dots"></i>
                        <a href="" style="color:#9BABC6; text-decoration: none; font-size:12px">22 Comments</a>
                      </div>
                      <button (click)="openTask(item._id)"> <span class="material-symbols-outlined">
                        open_in_new
                        </span></button>
                      <button (click)="updateTaskDialog(item)"><span class="material-symbols-outlined">
                        edit
                        </span></button>
                      <button (click)="deleteTask(item._id)" class="delete-button"><span class="material-symbols-outlined">
                        delete
                        </span></button>
                    </div>
                  }
                </div>
              </div>
            </div>
          </div>
          <div class="col-xs-12 col-lg-6 col-xl-3  ">
            <div class=" d-flex  justify-content-center align-items-center">
              <div class="example-container">
                <div class="card-header">
                  <div class="d-flex justify-content-start align-items-center">
                    <i class="fa-solid fa-circle" style="color:#F0BF11"></i>
                    <h2>In progress</h2>
                    <div class="circle-number d-flex justify-content-center align-items-center bg-light text-dark" style="border-radius:50%; width:20px; height:20px;">{{ inProgress.length }}</div>
                  </div>
                </div>
                <div style="background-color: #F0BF11;height:4px; width:100%"></div>
                <div
                  cdkDropList
                  #inProgressList="cdkDropList"
                  [cdkDropListData]="inProgress"
                  [cdkDropListConnectedTo]="[todoList, inReviewList, doneList]"
                  class="example-list"
                  (cdkDropListDropped)="drop($event)">
                  @for (item of inProgress; track item) {
                    <div class="example-box" cdkDrag>
                      <div class="d-flex justify-content-between align-items-center">
                        <div class="priority-box" [style.background-color]="getPriorityColor(item.priority)"><span [style.color]="getPriorityTextColor(item.priority)">{{item.priority}}</span></div>
                        <i class="fa fa-ellipsis"></i>
                      </div>
                      <div class="priority-circle" ></div>
                      <p class="text-task" style="font-weight:700; font-size:16px;margin:0; margin-top:8px">{{item.title}}</p>
                      <p class="text-description" style="margin:0px; color:#9BABC6; font-weight:400; font-size:smaller">This is a small brief about the task..</p>
                      <div class="d-flex justify-content-start align-items-center flex-wrap">
                        <p style="margin:0; margin-bottom:4px; margin-top:4px; font-weight:500">Assigned to: </p>
                        <div class="d-flex flex-wrap justify-content-start align-items-center">
                          <div class="participant">BenamorAziz12</div>
                          <div class="participant">HamdiBcr45</div>
                          <div class="participant">MohamedNajjar12</div>
                        </div>
                      </div>
                      <div>
                        <p style="color:#9BABC6"><span style="color:#7637F5">Due date:</span> 12 Jan 2024</p>
                      </div>
                      <div class="progress" role="progressbar" aria-label="Animated striped example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: 75%">7 Days left</div>
                      </div>
                      <div class="comments mt-3 text-end">
                        <i style="color:#9BABC6; text-decoration: none; font-size:12px" class="me-1 fa-regular fa-comment-dots"></i>
                        <a href="" style="color:#9BABC6; text-decoration: none; font-size:12px">22 Comments</a>
                      </div>
                      <button (click)="openTask(item._id)"><span class="material-symbols-outlined">
                        edit
                        </span></button>
                      <button (click)="updateTaskDialog(item)"><span class="material-symbols-outlined">
                        edit
                        </span></button>
                      <button (click)="deleteTask(item._id)" class="delete-button"><span class="material-symbols-outlined">
                        delete
                        </span></button>
                    </div>
                  }
                </div>
              </div>
            </div>
          </div>
          <div class=" col-xs-12 col-lg-6 col-xl-3  ">
            <div class=" d-flex  justify-content-center align-items-center">
              <div class="example-container">
                <div class="card-header">
                  <div class="d-flex justify-content-start align-items-center">
                    <i class="fa-solid fa-circle" style="color:#EE681D"></i>
                    <h2>In Review</h2>
                    <div class="circle-number d-flex justify-content-center align-items-center bg-light text-dark" style="border-radius:50%; width:20px; height:20px;"><span>{{ inReview.length }}</span></div>
                  </div>
                </div>
                <div style="background-color: #EE681D;height:4px; width:100%"></div>
                <div
                  cdkDropList
                  #inReviewList="cdkDropList"
                  [cdkDropListData]="inReview"
                  [cdkDropListConnectedTo]="[todoList, doneList, inProgressList]"
                  class="example-list"
                  (cdkDropListDropped)="drop($event)">
                  @for (item of inReview; track item) {
                    <div class="example-box" cdkDrag>
                      <div class="d-flex justify-content-between align-items-center">
                        <div class="priority-box" [style.background-color]="getPriorityColor(item.priority)"><span [style.color]="getPriorityTextColor(item.priority)">{{item.priority}}</span></div>
                        <i class="fa fa-ellipsis"></i>
                      </div>
                      <div class="priority-circle" ></div>
                      <p class="text-task" style="font-weight:700; font-size:16px;margin:0; margin-top:8px">{{item.title}}</p>
                      <p class="text-description" style="margin:0px; color:#9BABC6; font-weight:400; font-size:smaller">This is a small brief about the task..</p>
                      <div class="d-flex justify-content-start align-items-center flex-wrap">
                        <p style="margin:0; margin-bottom:4px; margin-top:4px; font-weight:500">Assigned to: </p>
                        <div class="d-flex flex-wrap justify-content-start align-items-center">
                          <div class="participant">BenamorAziz12</div>
                          <div class="participant">HamdiBcr45</div>
                          <div class="participant">MohamedNajjar12</div>
                        </div>
                      </div>
                      <div>
                        <p style="color:#9BABC6"><span style="color:#7637F5">Due date:</span> 12 Jan 2024</p>
                      </div>
                      <div class="progress" role="progressbar" aria-label="Animated striped example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: 75%">7 Days left</div>
                      </div>
                      <div class="comments mt-3 text-end">
                        <i style="color:#9BABC6; text-decoration: none; font-size:12px" class="me-1 fa-regular fa-comment-dots"></i>
                        <a href="" style="color:#9BABC6; text-decoration: none; font-size:12px">22 Comments</a>
                      </div>
                      <button (click)="openTask(item._id)"><span class="material-symbols-outlined">
                        open_in_new
                        </span></button>
                      <button (click)="updateTaskDialog(item)"><span class="material-symbols-outlined">
                        edit
                        </span></button>
                      <button (click)="deleteTask(item._id)" class="delete-button"><span class="material-symbols-outlined">
                        delete
                        </span></button>
                    </div>
                  }
                </div>
              </div>
            </div>
          </div>
          <div class="col-xs-12 col-lg-6 col-xl-3   ">
            <div class="d-flex  justify-content-center align-items-center">
              <div class="example-container">
                <div class="card-header">
                  <div class="d-flex justify-content-start align-items-center">
                    <i class="fa-solid fa-circle" style="color:#34CE1B"></i>
                    <h2>Done</h2>
                    <div class="circle-number d-flex justify-content-center align-items-center bg-light text-dark" style="border-radius:50%; width:20px; height:20px;">{{ done.length }}</div>
                  </div>
                </div>
                <div style="background-color: #34CE1B;height:4px; width:100%"></div>
                <div
                  cdkDropList
                  #doneList="cdkDropList"
                  [cdkDropListData]="done"
                  [cdkDropListConnectedTo]="[todoList, inProgressList, inReviewList]"
                  class="example-list"
                  (cdkDropListDropped)="drop($event)">
                  @for (item of done; track item) {
                    <div class="example-box" cdkDrag>
                      <div class="d-flex justify-content-between align-items-center">
                        <div class="priority-box" [style.background-color]="getPriorityColor(item.priority)"><span [style.color]="getPriorityTextColor(item.priority)">{{item.priority}}</span></div>
                        <i class="fa fa-ellipsis"></i>
                      </div>
                      <div class="priority-circle" ></div>
                      <p class="text-task" style="font-weight:700; font-size:16px;margin:0; margin-top:8px">{{item.title}}</p>
                      <p class="text-description" style="margin:0px; color:#9BABC6; font-weight:400; font-size:smaller">This is a small brief about the task..</p>
                      <div class="d-flex justify-content-start align-items-center flex-wrap">
                        <p style="margin:0; margin-bottom:4px; margin-top:4px; font-weight:500">Assigned to: </p>
                        <div class="d-flex flex-wrap justify-content-start align-items-center">
                          <div class="participant">BenamorAziz12</div>
                          <div class="participant">HamdiBcr45</div>
                          <div class="participant">MohamedNajjar12</div>
                        </div>
                      </div>
                      <div>
                        <p style="color:#9BABC6"><span style="color:#7637F5">Due date:</span> 12 Jan 2024</p>
                      </div>
                      <div class="progress" role="progressbar" aria-label="Animated striped example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: 75%">7 Days left</div>
                      </div>
                      <div class="comments mt-3 text-end">
                        <i style="color:#9BABC6; text-decoration: none; font-size:12px" class="me-1 fa-regular fa-comment-dots"></i>
                        <a href="" style="color:#9BABC6; text-decoration: none; font-size:12px">22 Comments</a>
                      </div>
                      <button (click)="openTask(item._id)"><span class="material-symbols-outlined">
                        open_in_new
                        </span></button>
                      <button (click)="updateTaskDialog(item)"><span class="material-symbols-outlined">
                        edit
                        </span></button>
                      <button (click)="deleteTask(item._id)" class="delete-button"><span class="material-symbols-outlined">
                        delete
                        </span></button>
                    </div>
                  }
                </div>
              </div>
            </div>
          </div>
          <div class="button d-flex justify-content-center align-items-center" style="margin-bottom:20px">
            <p style="margin: 0 10px; font-size: 20px;">
              Participating in {{ participating.length }} Task{{ participating.length !== 1 ? 's' : '' }}
            </p>
          </div>
    
          <div class="row" style="margin-bottom:100px">
            <div class="d-flex  justify-content-center align-items-center">
              <div cdkDropList class="example-list"
                (cdkDropListDropped)="drop($event)">
                @for (item of participating; track item) {
                <div class="example-box" cdkDrag>
                  <div class="priority-circle" [style.background-color]="getPriorityColor(item.priority)"></div>
                  <p class="text-task">{{item.title}}</p>
                  <button (click)="openTask(item._id)"><span class="material-symbols-outlined">
                    open_in_new
                    </span></button>
                  <button (click)="unsubscribeTask(item._id)" class="delete-button"><span class="material-symbols-outlined">
                    person_remove
                    </span></button>
                </div>
                }
              </div>
            </div>
          </div>
        </div>
        
      </div>
    </mat-drawer-content>
  </mat-drawer-container>
</div>
